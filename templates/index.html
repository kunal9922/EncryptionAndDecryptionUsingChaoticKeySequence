<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chaotic Image Encryption</title>
    <link
      rel="stylesheet"
      href="{{url_for('static', filename='css/styles.css')}}"
    />
  </head>
  <body>
    <h1>Chaotic Image Encryption</h1>
    <!-- Overlay with loading spinner -->
    <div id="loadingOverlay" class="overlay">
      <div class="spinner"></div>
    </div>

    <h2>Encrypt Image</h2>

    <!-- Wrap the container in a label associated with the file input -->
    <label for="image" class="drop-container" id="encrypt-drop-container">
      <div class="drop-content">
      <div class="drop-icon">
        <img
          src="{{url_for('static', filename='/images/drag-and-drop.png')}}"
          alt="Custom Icon"
        />
      </div>
      <div class="drop-message">Drag & Drop Original Image or Click Here</div>
      </div>
      <input
        type="file"
        id="image"
        required
        accept="image/*"
        hidden
      />
      <input type="hidden" class="image-filenames" />
      <div id="image-preview-en"></div>
    </label>

    <div class="form-container">
      <form id="encryptForm" class="encrypt-form">
        <label for="initCond">Initial Condition:</label>
        <input type="text" id="initCond" required /><br />

        <label for="controlPara">Control Parameter:</label>
        <input type="text" id="controlPara" required /><br />
        <input type="submit" value="Encrypt" class="custom-button" />
      </form>

      <!-- Add the download button -->
      <button id="downloadEncrypted" class="custom-button">
        Download Encrypted Image
      </button>
    </div>

    <div id="headingContainer">
      <h2>Encrypted Image</h2>
      <h2>Bifurcation Diagram</h2>
    </div>

    <div id="imageContainer">
      <div id="encryptedImage"></div>
      <div id="bifurcationDiagramEn"></div>
    </div>

    <h2>Decrypt Image</h2>

    <!-- Wrap the container in a label associated with the file input -->
    <label for="encryptedImageFile" class="drop-container" id="decrypt-drop-container">
      <div class="drop-content">
      <div class="drop-icon">
        <img
          src="{{url_for('static', filename='/images/drag-and-drop.png')}}"
          alt="Custom Icon"
        />
      </div>
      <div class="drop-message">Drag & Drop Encrypted Image or Click Here</div>
    </div>
      <input
        type="file"
        id="encryptedImageFile"
        required
        accept="image/*"
        hidden
      />
      <input type="hidden" class="image-filenames" />
      <div id="image-preview-de"></div>
    </label>

    <div class="form-container">
      <form id="decryptForm" class="decrypt-form">
        <label for="decryptInitCond">Initial Condition:</label>
        <input type="text" id="decryptInitCond" required /><br />

        <label for="decryptControlPara">Control Parameter:</label>
        <input type="text" id="decryptControlPara" required /><br />
        <input type="submit" value="Decrypt" class="custom-button" />
      </form>
      <!-- Add the download button -->
      <button id="downloadDecrypted" class="custom-button">
        Download Decrypted Image
      </button>
    </div>
    <div id="headingContainer">
      <h2>Decrypted Image</h2>
      <h2>Bifurcation Diagram</h2>
    </div>

    <div id="imageContainer">
      <div id="decryptedImage"></div>
      <div id="bifurcationDiagramDe"></div>
    </div>

    <script src="{{url_for('static', filename='js/script.js')}}"></script>
  </body>
</html>
